<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# snowflake

```go
import "gitlab.inheaden.io/IL/go-service-libs/v3/snowflake"
```

## Index

- [Constants](<#constants>)
- [func ConvertFromSnowflake\(input ID\) string](<#ConvertFromSnowflake>)
- [func ConvertToStrings\(snowflakes \[\]ID\) \[\]string](<#ConvertToStrings>)
- [type Generator](<#Generator>)
  - [func NewGenerator\(nodeID int64\) \(\*Generator, error\)](<#NewGenerator>)
  - [func \(g \*Generator\) Next\(\) ID](<#Generator.Next>)
- [type ID](<#ID>)
  - [func ConvertToSnowflake\(input string\) \(ID, error\)](<#ConvertToSnowflake>)
  - [func \(f ID\) Int64\(\) int64](<#ID.Int64>)
  - [func \(f ID\) String\(\) string](<#ID.String>)


## Constants

<a name="Epoch"></a>

```go
const (
    // Epoch is the unix epoch of 5th of September 2021.
    Epoch int64 = 1315164522123

    NodeBits    uint8 = 10
    CounterBits uint8 = 12

    NodeMax    = -1 ^ (-1 << NodeBits)
    CounterMax = -1 ^ (-1 << CounterBits)

    NodeShift = CounterBits
    TimeShift = NodeBits + CounterBits
)
```

<a name="ConvertFromSnowflake"></a>
## func [ConvertFromSnowflake](<https://gitlab.inheaden.io/IL/go-service-libs/blob/main/snowflake/converter.go#L10>)

```go
func ConvertFromSnowflake(input ID) string
```



<a name="ConvertToStrings"></a>
## func [ConvertToStrings](<https://gitlab.inheaden.io/IL/go-service-libs/blob/main/snowflake/converter.go#L14>)

```go
func ConvertToStrings(snowflakes []ID) []string
```



<a name="Generator"></a>
## type [Generator](<https://gitlab.inheaden.io/IL/go-service-libs/blob/main/snowflake/snowflake.go#L28-L36>)



```go
type Generator struct {
    *utils.WithLogger
    // contains filtered or unexported fields
}
```

<a name="NewGenerator"></a>
### func [NewGenerator](<https://gitlab.inheaden.io/IL/go-service-libs/blob/main/snowflake/snowflake.go#L54>)

```go
func NewGenerator(nodeID int64) (*Generator, error)
```

NewGenerator creates a new instance of the snowflake generator.

A snowflake is a pseudo random 63bit ID that is \* Roughly sorted \* Most certainly unique across instances

Structure:

| Unix time in ms | Node ID | Counter | |\-\-\-\-\- 41 bit \-\-\-\-|\-\-\- 10 \-\-|\-\- 12 \-\-\-| \</pre\>

The unix time makes the IDs roughly sorted, the nodeID ensures uniqueness.

The node ID must be unique across instances. The generator is capable of generation 4096 unique IDs within one ms.

<a name="Generator.Next"></a>
### func \(\*Generator\) [Next](<https://gitlab.inheaden.io/IL/go-service-libs/blob/main/snowflake/snowflake.go#L67>)

```go
func (g *Generator) Next() ID
```

Next returns a new snowflake ID.

<a name="ID"></a>
## type [ID](<https://gitlab.inheaden.io/IL/go-service-libs/blob/main/snowflake/snowflake.go#L26>)



```go
type ID int64
```

<a name="ConvertToSnowflake"></a>
### func [ConvertToSnowflake](<https://gitlab.inheaden.io/IL/go-service-libs/blob/main/snowflake/converter.go#L5>)

```go
func ConvertToSnowflake(input string) (ID, error)
```



<a name="ID.Int64"></a>
### func \(ID\) [Int64](<https://gitlab.inheaden.io/IL/go-service-libs/blob/main/snowflake/snowflake.go#L86>)

```go
func (f ID) Int64() int64
```

Int64 returns an int64 of the snowflake ID.

<a name="ID.String"></a>
### func \(ID\) [String](<https://gitlab.inheaden.io/IL/go-service-libs/blob/main/snowflake/snowflake.go#L90>)

```go
func (f ID) String() string
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
